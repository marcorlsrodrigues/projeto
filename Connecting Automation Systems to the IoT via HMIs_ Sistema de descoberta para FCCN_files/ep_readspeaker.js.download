(function(a,b){var c={placeholderSelector:"div.rs-placeholder",accentMappings:{ScanSoft_Daniel_Full_22kHz:"en_uk",ScanSoft_Jill_Full_22kHz:"en_us",ScanSoft_Karen_Full_22kHz:"en_au"},encodeFileName:function(f){if(f.length!==1){return"";}var h=f.attr("data-text-to-speech-title").replace(/(([^\s]+\s\s*){5})(.*)/,"$1").replace(/ +$/,""),e=f.attr("data-text-to-speech-author"),d=""+f.attr("data-text-to-speech-additional-filename"),g=(h+(e.length>0?"-"+e:"")+(d.length>0?"-"+d:"")).replace(/[^\w\-]/g,"");return encodeURIComponent(g);},setupFullTextDiv:function(f){var d=a(".full-text-container"),e="rs_full_text_container_title";if(d.length===1){d.find(".ft-title").addClass("textToSpeechDataContainer");d.attr("id",d.id?d.id:e);f=d.attr("id");}return f;},setup:function(){var e=a(this.placeholderSelector),d=a(".record-type.audio-link");if(e.length>0&&d.length===0){e.each(function(){var f=a(this),m,h,o,p,q,j,k,l,i=a("#"+f.data("parent"));if(b.interfaceId&&b.interfaceId==="ell"){i=a(e[0]);}if(i.length>0){m=f.data("readid");m=c.setupFullTextDiv(m);o=f.data("server");p=f.data("speed").toLowerCase();q=c.accentMappings[f.data("voice")]||"en_us";j=(f.data("download")||false)&&a("div.full-text-container").length>0;l=f.data("isdetail");k=c.encodeFileName(a("section#TextToSpeech"));a(":hidden,.submenu,.hidden,iframe").addClass("rs_skip");if(a("#"+m).length===0){m=a("div#innerContainer").attr("id");}window.rsConf||(window.rsConf={});window.rsConf.speed=p;window.rsConf.lang=q;window.rsConf.download=j;var n=b.baseImagePath+"javascript/texttospeech/ReadSpeaker.js?pids=embhl&skin=EBSCO";var g=document.createElement("script");g.type="text/javascript";g.src=n;document.body.appendChild(g);h=a('<div id="readspeaker_button" class="rs_skip rsbtn_ebsco rs_preserve" style="display:block;"><a class="rsbtn_play" id="readspeaker_link" accesskey="L" href="'+o+"&amp;lang="+q+"&amp;readid="+m+"&amp;url="+encodeURIComponent(window.location.href)+"&amp;speedValue="+p+"&amp;download="+j+(k.length>0?"&audiofilename="+k:"")+'"><span class="rsbtn_left rsimg rspart"><span class="rsbtn_text"><span>Listen</span></span></span><span class="rsbtn_right rsimg rsplay rspart"></span></a></div>');i.append(h).show();b.logDownload=function(){a.ajax({url:b.utilities.buildAjaxRequestPath("TextToSpeech/LogAudioDownload")});};if(l===true){b.logAudioPlayback=function(){a.ajax({url:b.utilities.buildAjaxRequestPath("TextToSpeech/LogAudioReading")});};}}});}}};a(document).ready(function(){var e=(navigator.appVersion.indexOf("MSIE")!==-1)?true:false;var d=(e)?800:200;c.setup();setTimeout(function(){if(a(".rs-flash-link").length>0){a(".readspeakerContainer").addClass("noflash");}},d);});if(typeof define==="function"&&define.amd){define("epreadspeaker",[],function(){return c;});}}(jQuery,ep));