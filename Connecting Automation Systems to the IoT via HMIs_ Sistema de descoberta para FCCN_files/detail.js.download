var ep = window.ep || {}; ep.bundles = ep.bundles || []; ep.bundles = ep.bundles.concat('bundled/eds/page/detail.js','ep/controller/control/imagequickview.js', 'ep/eprecordpreviewhover.js', 'ep/widgets/eppanel.js', 'ep/util/form.js', 'ep/controller/page/citationcontroller.js', 'ep/controller/control/foldertool.js', 'ep/controller/control/bookjackets.js');
ep.register("ep.controller.control.ImageQuickView",function(a){var d=function(i){ep.debug("ep.controller.control.ImageQuickView.onIQVLinkClick");i.preventDefault();var h=a(i.target).data("iqvargs");if(h){b(ep.controller.control.ImageQuickView.thumbnailType,h);}};function g(i){ep.debug("ep.controller.control.ImageQuickView.setEvents");var h=a("a[id^='linkQuikView']");if(h.length){if(i){h.unbind();}else{h.click(d);}}}function f(i,j){ep.debug("ep.controller.control.ImageQuickView.setAjaxActivity");var h=a("#ajaxActivity_"+j);if(h.length){h.css({display:(i)?"inline":"none"});}}function b(l,i){ep.debug("ep.controller.control.ImageQuickView.getThumbnails");var j=i.itemId;var h=("tContainer2_"+j);f(true,j);if(a("#"+h).is(":empty")){var k={theThumbnailType:l,SearchTerm:i.searchTerm,DB:i.db,ParentUI:i.an,Tag:i.tag,theSearchData:i.searchData};var m=ep.utilities.buildAjaxRequestPath("ImageQuickView/GetThumbnails");a.ajax({type:"POST",url:m,data:k,context:this,success:function(n){e(h,n);}});}else{e(h);}}function e(m,n){ep.debug("ep.controller.control.ImageQuickView.processThumbnailData");var h=a("#"+m);var i=m.split("_")[1];var l=a("#linkQuikView11_"+i);var k=a("#linkQuikView21_"+i);var j=a("#linkQuikView22_"+i);if(h.is(":visible")){h.hide();l.css({display:"inline"});k.css({display:"none"});j.parent().css({display:"none"});}else{h.show();l.css({display:"none"});k.css({display:"inline"});j.parent().css({display:"inline"});}if(h.is(":empty")){h.html(n);}f(false,i);}function c(){ep.debug("ep.controller.control.ImageQuickView.Initialize");ep.getInstance("ep.utilities");g(false);a(window).unload(a.proxy(function(){g(true);},this));}ep.domLoad(c);}(jQuery));(function(a){ep.dialog.RecordPreview=function(){var g={};function d(p){var o=jQuery(".json-data",p);if(!o.length){return null;}var n=jQuery.parseJSON(o[0].firstChild.nodeValue);n.theHoverElement=p;return f(n,null,true);}function e(w){var p=null;var s=w+1;var u="";var n=jQuery("#hoverPreview"+s).data("hoverpreviewjson");if(n){var o=null;if(n.resultListId||n.archiveNoteItemId){o=ep.utilities.buildAjaxRequestPath("Detail/HoverPreview");u=n.resultListId;}else{if(n.db&&n.tag&&n.term){o=ep.utilities.buildAjaxRequestPath("Detail/HoverPreview",{Db:n.db,Tag:n.tag,Term:n.term});}}var q=jQuery("#hoverPreview"+s).parent().parent("ol").hasClass("related-info-list");var v=jQuery("#hoverPreview"+s).attr("targetid");var t=jQuery("#hoverPreview"+s).data("reasontext");var r={theIsRelatedInfo:q,theTargetId:v,theResultListId:u,isNovList:n.isNovList};if(n.archiveNoteItemId){r.theArchiveNoteItemId=n.archiveNoteItemId;}if(n.isNote){r.theIsNote=n.isNote;}jQuery.ajax({url:o,data:r,async:false,success:function(x){p=f(x,w,t);}});}return p;}function f(o,y,x){var s="";s+="<dl class=\"preview-detail\" data-auto='preview_detail'";if(o.ExtendedMarkupInfo&&o.ExtendedMarkupInfo!=""){s+="data-extmarkup='"+o.ExtendedMarkupInfo+"'";}s+=">";var q;var r;var p;if(o.IgnoreProperties){q="Title";r=o.DisplayValues[q];p=q;s+="<dt data-auto='preview_detail_title_hidden'";s+=' class="hidden"';s+=">"+p+":</dt><dd";s+=" data-auto='preview_detail_title' class=\"title-link\"";if(false){s+='href="'+a(o.theHoverElement).parent().find("a").attr("href")+'"';}else{s+='href="#"';}s+=">"+m(o,r,a(o.theHoverElement).parent().find("a").attr("href"))+"</dd>";o.IgnoreProperties.push("Title");}if(x){o.DisplayValues.Reason=x+o.RecommendationFeedbackTag;}for(q in o.DisplayValues){if(typeof o.DisplayValues[q]!=="function"){if(k(o.IgnoreProperties,q)){continue;}r=o.DisplayValues[q];if(r&&r.length>0){p=q;if(_.isArray(r)){r=l(r);}if(ep.clientData.hoverPreviewLabelData[q]){p=ep.clientData.hoverPreviewLabelData[q];}s+="<dt data-auto='preview_detail_info_label'";if(q==="Title"){s+=' class="hidden"';}s+=">"+p+":</dt><dd data-auto='preview_detail_info_value'";if(q==="Title"){s+=' class="title-link"';s+=">"+m(o,r)+"</dd>";}else{s+=">"+r+"</dd>";}}}}s+="</dl>";if(o.HeaderLinks||o.FooterLinks){s+="<div class=\"hover-links\" data-auto='preview_detail_links'>";}var u=o.HeaderLinks;if(u&&u.length>0&&o.TargetId){for(var v=0;v<u.length;v++){s+=c(o.TargetId,u[v]);}}else{if(o.ResultListIndex){s+=j(o.ResultListIndex);}}if(ep.dialog.RecordPreview.isShowFolderLink){s+=b(y,o);}var t=o.FooterLinks;if(t&&t.length>0&&o.TargetId){for(var w=0;w<t.length;w++){s+=c(o.TargetId,t[w]);}}else{if(o.ResultListIndex){s+=i(o.ResultListIndex,"record-type format-citation",ep.clientData.hoverPreviewLabelData.FullCitation,true);var n=document.getElementById("externalLinks"+o.ResultListIndex);if(n&&n.innerHTML&&n.innerHTML.length>0){s+='<div class="hover-external-links" data-auto="preview_detail_external_links">'+n.innerHTML+"</div>";}}}s+="</div>";if(ep.isPageRTL()){s=ep.utilities.bidiSanitizeContent(s);}return s;}function m(s,n,t){if(s.ResultListIndex){return i(s.ResultListIndex,"",n,false);}else{if(s.FooterLinks){var o=s.FooterLinks;if(o&&o.length>0&&s.TargetId){for(var p=0;p<o.length;p++){if(o[p].Args==="Citation"||o[p].Text==="Retrieve Item"){var q=jQuery.extend({},o[p]);q.CssClass="";q.Text=n;return c(s.TargetId,q);}}}return null;}else{var r="";if(t){r+='<a href="'+t+"\" data-auto='title_link'>"+n+"<a/>";}else{r=n;}return r;}}}function l(n){var o=n[0];a.each(n,function(p,q){if(p>0){o+="; "+q;}});return o;}function k(n,o){if(!n){return false;}return _.indexOf(n,o)>-1;}function b(u,t){var n="hover-add-folder";var p=ep.clientData.hoverPreviewLabelData.AddToFolder;var r=!t.RecordHasEISExtLink?ep.clientData.hoverPreviewLabelData.AddToFolderTitle:ep.clientData.hoverPreviewLabelData.AddExternalRecToFolder;var s=false;if(t.ResultListIndex){var q=document.getElementById("add_"+t.ResultListIndex);if(q&&q.style.display==="none"){s=true;}}else{s=t.IsInFolder;}if(s){n="hover-remove-folder";if(ep.dialog.isShowAddFolderPopup){p=ep.clientData.hoverPreviewLabelData.AddRemoveToFolder;r=ep.clientData.hoverPreviewLabelData.AddRemoveToFolderTitle;}else{p=ep.clientData.hoverPreviewLabelData.RemoveFromFolder;r=!t.RecordHasEISExtLink?ep.clientData.hoverPreviewLabelData.RemoveFromFolderTitle:ep.clientData.hoverPreviewLabelData.RemoveExternalRecFromFolder;}}var o="";if((window.location.href.indexOf("/folder?")<0)&&(!t.NoteContentType)){if(ep.dialog.isShowAddFolderPopup){o+='<a data-auto="hover_folder_link" class="{cssclass}" id="hover_folder" href="#" onclick="ep.dialog.RecordPreview.showFolderPopup(event, {dataIndex})" title="{titleText}"><span data-auto="hover_folder_icon" class="icon"></span>{text}</a>';}else{o+='<a data-auto="hover_folder_link" class="{cssclass}" id="hover_folder" href="#" onclick="return ep.dialog.RecordPreview.toggleHoverFolderLink(this,{dataIndex},{rlindex},{RecordHasEISExtLink});" title="{titleText}"><span data-auto="hover_folder_icon" class="icon"></span>{text}</a>';o=o.replace(/\{rlindex\}/g,t.ResultListIndex?t.ResultListIndex.toString():"null");}o=o.replace(/\{dataIndex\}/,u.toString());o=o.replace(/\{RecordHasEISExtLink\}/,t.RecordHasEISExtLink);o=o.replace(/\{cssclass\}/,n);o=o.replace(/\{text\}/g,p);o=o.replace(/\{titleText\}/g,r);}else{o+='<span data-auto="hover_remove_folder_icon" class="hover-remove-folder"><span class="icon"></span>';o+=ep.clientData.hoverPreviewLabelData.FolderItem;o+="</span>";o=o.replace(/\{text\}/,p);o=o.replace(/\{titleText\}/,r);}return o;}function c(p,o){var n="<a data-auto='citation_link' href=\"";if(o.DoPostBack===true){n+="javascript";n+=":__doPostBack('";n+=p;n+="','"+o.Args+"');";}else{if(o.Args.indexOf("url=http")>-1){n+=o.Args;n+='" target="_blank';}else{n+=o.Args+'"';}}if(o.CssClass&&o.CssClass.length>0){n+='" class="'+o.CssClass;}n+='">'+o.Text;n+="</a>";return n;}function i(s,p,r,q){var n=document.getElementById("Result_"+s);var o;if(n){if(n.getAttributeNode("onclick")===null){o="<a data-auto='citation_link' href=\""+n.getAttribute("data-href")+'" onclick="'+h(n.getAttributeNode("data-onclick").nodeValue,r,s,q);}else{o="<a data-auto='citation_link' href=\""+n.getAttribute("href")+'" onclick="'+h(n.getAttributeNode("onclick").nodeValue,r,s,q);}o+='" class="'+p+'">'+r+"</a>";}return o;}function h(n,q,r,p){var o=n;if(p){o="__doLinkPostBack('','target~~fulltext||args~~";o+=r;o+="',''); return false;";}return o;}function j(v){var s="";var r=jQuery("#formats"+v);if(r.length){var o=jQuery(r).clone();if(jQuery.trim(o.html())===""){var u=jQuery("#smartlinkft"+v);if(u&&u.length){o.append(u[0].outerHTML);}var p=jQuery("#htmlft"+v);if(p&&p.length){o.append(p[0].outerHTML);}var q=jQuery("#pdfft"+v);if(q&&q.length){o.append(q[0].outerHTML);}var n=jQuery("#epubft"+v);if(n&&n.length){o.append(n[0].outerHTML);}var t=jQuery("#magazine_"+v);if(t&&t.length){o.append(t[0].outerHTML);}}o.find("[id*='Download']").remove();o.find("[class*='requires-wma']").remove();o.find("[class*='audio-clip']").remove();s+=o.html();}return s;}return{initPreviewHovers:function(r,s){ep.dialog.RecordPreview.isShowFolderLink=r;var q=jQuery('[id^="hoverPreview"]').length;for(var p=0;p<q;p++){var o="hoverPreview"+(p+1);var n=document.getElementById(o);if(n){ep.dialog.HoverPopup.addHover(o,p,e,s);}}},addSelfContainedRecordPreview:function(n,o){if(!g[n.id]){ep.dialog.HoverPopup.addHover(n,n,d,o);}g[n.id]=true;},showFolderPopup:function(r,t){r.preventDefault();var s=t+1;var o=jQuery("#hoverPreview"+s).data("hoverpreviewjson");if(o){var p=false;var q=s?s:"";var n=jQuery("#add_"+q);if(n.length&&n.css("display")!=="none"){p=true;}ep.controller.control.AddToFolderPopup.showAddToFolderPopup(r,{theResultId:q,theIsResultList:true,theIsResultHover:true,theIsToggleIcon:p});}},toggleHoverFolderLink:function(r,s,u,p){var q=s+1;var t=jQuery("#hoverPreview"+q).data("hoverpreviewjson");if(t){var n=r.className==="hover-add-folder";if(u!==null){ep.folder.toggleFolderItem(u,n);}else{if(t){var o=ep.utilities.buildAjaxRequestPath("Folder/SetRouteKeyFolderJson",{Db:t.db,Tag:t.tag,Term:t.term});jQuery.ajax({url:o,async:false,success:function(v){ep.folder.toggleFolderItem(u,n,v);}});}}if(n){r.title=!p?ep.clientData.hoverPreviewLabelData.RemoveFromFolderTitle:ep.clientData.hoverPreviewLabelData.RemoveExternalRecFromFolder;r.innerHTML='<span class="icon" data-auto="hover_folder_icon"></span>'+ep.clientData.hoverPreviewLabelData.RemoveFromFolder;r.className="hover-remove-folder";t.IsInFolder=true;}else{r.title=!p?ep.clientData.hoverPreviewLabelData.AddToFolderTitle:ep.clientData.hoverPreviewLabelData.AddExternalRecToFolder;r.innerHTML='<span class="icon" data-auto="hover_folder_icon"></span>'+ep.clientData.hoverPreviewLabelData.AddToFolder;r.className="hover-add-folder";t.IsInFolder=false;}}return false;}};}();})(jQuery);(function(a){a.widget("ui.eppanel",{options:{Panel:"#ToolPanelContent",Id:"",Url:"",Js:""},_eventNamespace:"",_panel:{},_isOpen:false,_isInProg:false,_panelUrl:"",_create:function(){ep.debug("eppanel:create");this._setNamespace();this._panel=a(this.options.Panel);var b=this;this._panel.find(".close-panel").bind("click",function(c){b._closeClickHandler(c);});this._panel.bind("panelReady"+this._eventNamespace,function(c,d,e){if(d!==b.options.Id){ep.debug("trigger: panelOnClose - "+b.options.Id);b._panel.trigger("panelOnClose",b.options.Id);b.destroy();}else{ep.debug("No longer in progress "+b.options.Id);b._inProg=false;}});this._panel.bind("panelClose"+this._eventNamespace,function(c,d){if(d===b.options.Id){b._close();}});},_setNamespace:function(){if(this.options.Id&&this.options.Id.length>0){this._eventNamespace=".eppanel-"+this.options.Id;}else{this._eventNamespace=".eppanel-"+Math.floor(Math.random()*1001);}},_init:function(){if(this._isOpen){ep.debug("trigger: panelOnClose - "+this.options.Id);this._panel.trigger("panelOnClose",this.options.Id);this._close();}else{this._open();}},_open:function(){ep.debug("eppanel:open "+this.options.Id);if(!this._isInProg){this._isInProg=true;this.element.parent().addClass("active bg-p2");this._setPanelUrl();this._getContent();}},_close:function(){ep.debug("eppanel:close "+this.options.Id);if(this._isOpen){this._panel.hide();this._panel.find(".close-panel").unbind();this._panel.resize();this.destroy();this._isOpen=false;}},destroy:function(){ep.debug("eppanel:destroy "+this.options.Id);this.element.parent().removeClass("active bg-p2");a(document).unbind(this._eventNamespace);this._panel.unbind(this._eventNamespace);a.Widget.prototype.destroy.call(this);a(window).trigger("panelClose:resize",this.options.Id);},_closeClickHandler:function(b){this._close();},_setPanelUrl:function(){if(this.options.Url.indexOf("?")!==-1){var b=ep.utilities.buildRouteKey(ep.clientData.currentRecord.Db,ep.clientData.currentRecord.Term,ep.clientData.currentRecord.Tag);this._panelUrl=this.options.Url+"&recordKey="+b;if(ep.newReturnUrl){this._panelUrl+="&ReturnUrl="+encodeURIComponent(ep.newReturnUrl);}}else{this._panelUrl=ep.utilities.buildAjaxRequestPathWithNewReturn(this.options.Url,ep.clientData.currentRecord);}},_getContent:function(){var b=this;a.ajax({url:this._panelUrl,dataType:"html",success:function(c){b._updatePanel(c);b._loadJs();b._notify();b._panel.find(":tabbable").first().focus();b._isOpen=true;a(window).trigger("panelOpen:resize",b.options.Id);}});},_doEmptyWrapper:function(){var b=this._panel.children(".wrapper");if(b.children().length){b.empty();}},_updatePanel:function(c){var b=this._panel.children(".wrapper");this._doEmptyWrapper();b.append(c);if(ep.isPageRTL()){ep.utilities.bidiSanitizeContent(b.get(0));}this._panel.show();this._panel.find("a.close-panel").show();this._panel.resize();},_loadJs:function(){if(this.options.Js&&this.options.Js!==""){ep.require(this.options.Js);}},_notify:function(){ep.debug("trigger: panelReady - "+this.options.Id);this._panel.trigger("panelReady",this.options.Id);}});a(function(){a(document).delegate("[data-panel]","click",function(d){var c=a(d.currentTarget);var b=c.data("panel");c.eppanel(b);d.preventDefault();return false;});});})(jQuery);(function(a){var f=function(k){var h=a(k).data("form").action;if(h){var g=a("<form>",{action:ep.utilities.replaceEPCommand(h),method:"POST"});var i=a("*",k).serializeArray();a.each(i,function(m,l){g.append(a("<input>",{type:"hidden",name:l.name,value:l.value}));});var j=a(k).data("inputs");if(j){a.each(j,function(l,m){g.append(a("<input>",{type:"hidden",name:l,value:m}));});}a("body").append(g);g[0].submit();}},b=13,e=32,c=1,d=0;a("[data-form]").live("click keydown",function(o){var p=o.which,m=false,h=a(this),j=h.data("form");if(o.target.type==="submit"||o.target.type==="button"||o.target.type==="image"){var g=a(o.target).data("default-textbox"),n;if(g){n=a(this).find("#"+g).val();}if(j.allowFormSubmit||((j.allowEmptySubmit||n!=="")&&(p===b||p===c||p===d))){m=true;}}if(o.target.type==="text"){if(o.type==="keydown"&&p===b){if(j.allowEmptySubmit||o.target.value!==""&&p===b){m=true;}}}if(m){if(j.checkResultsBeforeSubmit){var l={},i=a("*",this).serializeArray(),k=a(h).data("inputs");a.each(i,function(r,q){l[q.name]=q.value;});if(k){a.each(k,function(q,r){l[q]=r;});}a.ajax({url:ep.utilities.buildAjaxRequestPath(j.checkResultsUrl),type:"POST",data:ep.util.JSON.stringify(l),contentType:"application/json; charset=utf-8",dataType:"html",success:function(r){var q=h.siblings("[data-no-results]");if(r!==""){if(!q.length){h.after(a('<div data-no-results=""></div>').html(r));}}else{if(q.length){q.remove();}f(h,o);}},error:function(q){}});}else{f(h,o);}o.preventDefault();return false;}});})(jQuery);ep.registerInstance("ep.controller.page.CitationController","ep.base.PageController",{onDomLoad:function(){this.initControls();this.setEvents();},onLoad:function(){_.defer(ep.loadImages);},initControls:function(){var a=jQuery("a[id^='linkQuikView']");if(a.length){ep.getInstance({epId:"ep.controller.control.ImageQuickView",thumbnailType:"THUMB_LARGE"});}if(jQuery("#column1").length){ep.getInstance({epId:"ep.controller.CollapsibleController",page:"citation"});}if(jQuery(".custom-widget").length){ep.getInstance({epId:"ep.controller.CustomWidgetController",page:"citation"});ep.getInstance({epId:"ep.controller.control.BookRelatedInformationController",page:"citation"});if(jQuery("body").hasClass("guest")){ep.getInstance({epId:"ep.controller.GuestLoginController",restrictedElements:[]});}}if(ep.clientData.restrictedElements){ep.getInstance({epId:"ep.controller.GuestLoginController",restrictedElements:ep.clientData.restrictedElements});}if(jQuery("#addThis").length&&ep.clientData.addThis){ep.require(ep.clientData.addThis.widgetUrl,function(){setTimeout(function(){addthis.init();},500);});}if(jQuery("html").attr("dir")==="rtl"){jQuery("#citationFields dd").bidi();}},setEvents:function(){this.setAddToFolderPopupEvents();this.setElementsVisibility();jQuery("#collapseall, #expandall").bind("click",function(){jQuery(".collapse-toggle").trigger("click",(this.id==="expandall"));return false;});jQuery("#Subsidiaries").parent().next().bind("toggled",this.subsidiariesSectionLinkClick);},setElementsVisibility:function(){if(!jQuery("#widgetsAnchor").length&&jQuery("#widgetLink").length){jQuery("#widgetLink").hide();}},setAddToFolderPopupEvents:function(){if(ep.clientData.isShowAddFolderPopup){jQuery(".folder-delivery-item button").each(jQuery.proxy(function(b,a){a.click(jQuery.proxy(this.addToFolderPopupLinkClick,this));},this));}},addToFolderPopupLinkClick:function(b){var a=ep.getInstance({epId:"ep.controller.control.AddToFolderPopup",params:{theClickEvent:b,theIsDetail:true,isExternalCitation:ep.clientData.isExternalCitation,theRecordDetails:ep.clientData.theRecordDetails}});if(a){a.showAddToFolderPopup(b);}return false;},subsidiariesSectionLinkClick:function(b){ep.require("_layout2/companyresults.css");var a=jQuery("#Subsidiaries");a.addClass("loading");jQuery.ajax({url:ep.utilities.getBaseRequestPath()+a.attr("href"),context:b.target,success:function c(e){a.removeClass("loading").unbind("click").parent().next().unbind("toggled").attr({href:"#"});var d=jQuery(this).find("table tbody"),f=jQuery(e);d.attr("aria-expanded","true").append(f);ep.getInstance("ep.controller.control.companyInfoResults",function(){ep.controller.control.companyInfoResults.init();});}});return false;}});(function(a){a(function(){if(ep.clientData.isShowAddFolderPopup){ep.require("ep.controller.control.AddToFolderPopup");}a("[data-folder]").click(function(d){var b=a(this);var c=b.data("folder");if(ep.clientData.isShowAddFolderPopup){ep.controller.control.AddToFolderPopup.showAddToFolderPopup(d,{theIsDetail:true,isExternalCitation:ep.clientData.isExternalCitation,theRecordDetails:ep.clientData.theRecordDetails,theIsAbook:ep.clientData.isAbook,theIsEbook:ep.clientData.isEbook,theIsToggleIcon:true});}else{if(b.hasClass("cit-folder-control")||b.parent().hasClass("cit-folder-control")){ep.folder.toggleFolderItem(null,false,c,false);b.removeClass("cit-folder-control");b.parent().removeClass("cit-folder-control");b.attr("title",ep.messages.Add_to_folder);b.text(ep.messages.Add_to_folder);ep.folder.updateToolbarFolderCount(false);}else{ep.folder.toggleFolderItem(null,true,c,false);b.addClass("cit-folder-control");b.parent().addClass("cit-folder-control");b.attr("title",ep.messages.Remove_from_folder);b.text(ep.messages.Remove_from_folder);ep.folder.updateToolbarFolderCount(true);}}a(window).trigger("resizeToolsBar");return false;});});})(jQuery);ep.register("ep.controller.control.BookJackets");ep.controller.control.BookJackets=(function(a){function c(h,f){var g=a(f);var e=g.data("book-jacket");if(e&&e.ThumbImageUrl&&e.ThumbImageUrl.length>0){a("<img />").load(function(){if(this.width>1||this.naturalWidth>1){g.prepend(a(this));a(this).wrapAll('<span class="bj-img"></span>');g.removeClass();if(e.Type===3){g.addClass("book-jacket-series");}else{g.addClass("book-jacket");}}else{a(this).remove();}}).attr({src:e.ThumbImageUrl,alt:e.ToolTip});}}function d(h,f){var g=a(f);var e=g.data("book-jacket");if(e&&e.ThumbImageUrl&&e.ThumbImageUrl.length>0){a("<img />").load(function(){if(this.width>1||this.naturalWidth>1){g.prepend(a(this));a(".pubtype-icon",g).remove();if(a.browser.msie){a(this).removeAttr("height").removeAttr("width");}a(this).attr("width","60px");a(this).attr("data-auto","book_jacket");g.removeClass("pubtype");if(e.Type===3){g.addClass("book-jacket-series");}else{g.addClass("book-jacket");}}else{a(this).remove();}}).attr({src:e.ThumbImageUrl,alt:e.ToolTip});}}function b(h,f){var g=a(f);var e=g.data("book-jacket");if(e&&e.ThumbImageUrl&&e.ThumbImageUrl.length>0){a("<img />").load(function(){if(this.width>1||this.naturalWidth>1){g.prepend(a(this));if(e.DetailImageUrl!==null&&a.trim(e.DetailImageUrl).length>0){a(this).wrapAll('<a href="'+e.DetailImageUrl+'" target="_blank"></a>');}if(a.browser.msie){a(this).removeAttr("height").removeAttr("width");}}else{a(this).remove();}}).attr({src:e.ThumbImageUrl,alt:e.ToolTip});}}return{loadResultBookJacketForMobile:function(e){a(e).find(".mobile-jacket[data-book-jacket]").each(c);},loadResultBookJacket:function(){a(".record-icon[data-book-jacket]").each(d);},loadDetailBookJacket:function(){a("#bookJacket[data-book-jacket]").each(b);},loadMobileResultBookJacket:function(){a(".mobile-jacket[data-book-jacket]").each(c);}};})(jQuery);(function(a){a(function(){ep.controller.control.BookJackets.loadDetailBookJacket();ep.controller.control.BookJackets.loadResultBookJacket();ep.controller.control.BookJackets.loadMobileResultBookJacket();});})(jQuery);