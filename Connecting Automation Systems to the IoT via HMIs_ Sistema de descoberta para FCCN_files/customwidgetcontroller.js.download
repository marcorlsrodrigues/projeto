ep.registerInstance("ep.controller.CustomWidgetController","ep.base.Controller",{onDomLoad:function(){this.setCustomWidgetsEvents();var a="a[href='#related_information_widget_other_formats_and_editions']";jQuery(a).live("click",function(){jQuery("#otherFormatsEditions").parent().prev().trigger("click");jQuery(a).die();});},setCustomWidgetsEvents:function(){ep.require("ep/controller/search.js");var a=jQuery("#content").find(".custom-widget");a.each(jQuery.proxy(function(c,b){if(jQuery(b).find(".collapse-toggle.active").length){this.populateCustomWidget(jQuery(b).find(".collapse-content")[0]);return true;}this.widgetBinder(b);},this));jQuery(".custom-widget").delegate(".findTitleLink","click",function(){ep.clientData.SetupSearchCriteria.SearchTerm=jQuery(this).data("search");ep.publish("ep.invokesearch",ep.clientData.SetupSearchCriteria);});},widgetBinder:function(b){var a=jQuery(b).find(".collapse-content");a.bind("toggled",jQuery.proxy(function(){this.populateCustomWidget(a);jQuery(a).unbind("toggled");},this));},populateCustomWidget:function(d){var c=jQuery(d).find(".widget_url").first();var b=jQuery(d).find(".widget_height").first();c=c.length?c.val():null;b=b.length?b.val():200;if(c){var a='<iframe src="'+c+'" height="'+b+'" width="100%" noresize="noresize" frameborder="no"></iframe>';jQuery(d).html(a);}jQuery(d).find(".toggle-icon").remove();jQuery(d).find(".toggle-text").html("Check Availability");}});